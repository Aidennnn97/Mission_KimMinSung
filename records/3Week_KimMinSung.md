# 3Week_김민성.md

## Title: [3Week] 김민성

### 미션 요구사항 분석 & 체크리스트

---
### 필수미션
- [ ] 네이버 클라우드 플랫폼을 통한 배포(도메인 없이, IP로 접속)
  - https://서버IP:포트/ 형태로 접속이 가능
  - 운영서버에서는 각종 소셜로그인, 인스타 아이디 연결이 안되어도 됨

- [ ] 호감표시/호감사유 변경 후, 개별 호감 표시건에 대해서, 3시간 동안은 호감취소와 호감사유 변경을 할 수 없음 
  - 호감표시를 한 후 개별호감표시건에 대해서, 3시간 동안은 호감취소와 호감사유변경을 할 수 없도록 작업 
  - 호감사유변경를 한 후 개별호감표시건에 대해서, 3시간 동안은 호감취소와 호감사유변경을 할 수 없도록 작업 

### 선택미션
- [ ] 알림기능 구현
  - 호감표시를 받았거나, 본인에 대한 호감사유가 변경된 경우에 알림페이지에서 확인이 가능하도록 해야 함
  - 각각의 알림은 생성시에 readDate 가 null 이고, 사용자가 알림을 읽으면 readDate 가 현재날짜 로 세팅되어야 함

### 3주차 미션 요약

---

**[접근 방법]**
- 호감표시/호감사유 변경 후, 개별 호감 표시건에 대해서, 3시간 동안은 호감취소와 호감사유 변경을 할 수 없음
  1. 자바 Time 패키지의 Duration 객체의 between 메서드를 사용하여 현재시간과 modifyUnlockDate 의 시간 차이를 계산한다. 
  2. toHours(), toMinutes() 메서드를 사용하여 남아 있는 시간과 분을 계산하여 리턴한다. 

- 케이스 6 : 케이스 4 가 발생했을 때 기존의 사유와 다른 사유로 호감을 표시하는 경우에는 성공으로 처리한다.
  1. 케이스 4의 2번 작업 수행 후 호감사유가 같은지 다른지 확인합니다.
  2. 만약 호감사유가 같다면 "이미 등록된 호감상대 입니다" 경고를 띄우고, 다르다면 서비스에 수정 요청을 합니다.
  3. 서비스에서 요청을 받아 수정시간과 호감사유코드를 수정후 저장해서 응답해 줍니다.

- 네이버 로그인
  1. 네이버 로그인 시 oauthId가 {id=?????} 의 문자열 형태로 가져와지는 것을 확인 합니다.
  2. oauthId를 JSON타입 변환 라이브러리를 사용하여 파싱을 하는 방식으로 접근 하였습니다. 


**[특이사항]**

호감상대를 추가할 때 add 메서드 안에 수정요청하는 로직도 구현되어 있는데
수정부분을 따로 분리해서 구현 해 보는 작업이 필요합니다.

네이버 로그인 id 값을 받아올 때 Json 타입으로 변환하는 방식이아닌 다른 방식도 다시 생각 해 봐야 할 것 같습니다.

- 컨트롤러에서 update 메서드 분리해서 구현.
- 네이버 로그인 id값 가져오는 로직 다시 구현.
